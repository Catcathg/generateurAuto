<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Shadows+Into+Light&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            margin: 20px;
        }

        input,
        button,
        select {
            margin: 5px;
            padding: 10px;
            font-size: 16px;
        }

        #error {
            color: red;
        }

        #success {
            color: green;
        }

        .helvetica {
            font-family: 'Helvetica', sans-serif;
        }

        .container-query {
            margin: 0 20px 20px 0;
        }

        .cap {
            text-transform: uppercase;
        }

        .b {
            font-weight: bold;
        }

        .title {
            font-size: 2.55rem;
            margin: 0.6em 0 0.25em 0;
        }

        .thcolor {
            color: #5DBD98;
        }

        .rotate {
            transform: rotate(180deg);
            /* é¡ºæ—¶é’ˆæ—‹è½¬180åº¦ */
            transform-origin: center;
            /* æ—‹è½¬çš„ä¸­å¿ƒç‚¹ä¸ºå…ƒç´ çš„ä¸­å¿ƒï¼ˆé»˜è®¤ï¼‰ */
        }

        .center {
            text-align: center;
        }

        .section {
            width: 90vw;
            aspect-ratio: 37 / 200;
            padding: 2vw 4.6vw 0 4.6vw;
            /* border:1px solid #cccccc; 
border-radius:1.8vw;*/
            font-size: 8rem;
            overflow: hidden;
            margin: -2%;
        }

        .half {
            height: 45%;
            overflow: hidden;
            position: relative;
            /* ç¡®ä¿ä¼ªå…ƒç´ èƒ½å¤Ÿç›¸å¯¹äºè¿™ä¸ª div å®šä½ */
            z-index: 1;
            /* ç¡®ä¿å†…å®¹åœ¨ä¼ªå…ƒç´ ä¸Šæ–¹ */
        }

        .chinese {
            position: absolute;
            bottom: 1.3%;
            right: 90vw;
            font-size: 8.5rem;
            color: rgba(0, 0, 0, 0.08);
            z-index: 0;
            pointer-events: none;
            transform: rotate(180deg);
            transform-origin: right;
            font-family: 'GenKiMin2 TC', sans-serif;
        }

        .quarter {
            width: 100%;
            aspect-ratio: 35 / 49;
            overflow: hidden;
        }

        .icons {
            display: flex;
        }

        .icon img {
            width: 100%;
            display: inline-block;
        }

        .poids {
            height: 4.95%;
            font-size: 3.3rem;
            margin: 3.71% 5%;
            position: relative;
            font-family: 'Poppins', sans-serif;
        }

        .poids::after {
            content: '';
            position: absolute;
            display: none;
            /* é»˜è®¤ä¸æ˜¾ç¤º */
        }

        /* å½“ bio æ˜¯ Y æ—¶ï¼Œæ˜¾ç¤ºå›¾ç‰‡ */
        #bio-image {
            display: block;
            width: 49%;
            top: 0;
            right: 0%;
            background-size: cover;
            position: absolute;
        }

        .effet {
            border-top: 1.2vw solid #5DBD98;
            border-bottom: 1.2vw solid #5DBD98;
            height: 5%;
            margin: 0 5%;
            display: flex;
            align-items: center;
            overflow: hidden;
            font-size: 3.7rem;
            /* word-break: break-all; 
hyphens: auto;  è‡ªåŠ¨æ’å…¥è¿å­—ç¬¦ */
            white-space: normal;
            /* å…è®¸æ­£å¸¸æ¢è¡Œ */
            line-height: 1.2em;
            font-weight: 800;
        }


        .nom {
            height: 12%;
            margin: 5% 5%;
            display: flex;
            align-items: flex-end;
            overflow: hidden;
            font-size: 6rem;
            /* è®¾ç½®å­—ä½“å¤§å°èŒƒå›´ï¼šæœ€å°12pxï¼Œæœ€å¤§20px */
            /*word-break: break-word; 
  hyphens: auto;  è‡ªåŠ¨æ’å…¥è¿å­—ç¬¦ */
            white-space: normal;
            /* å…è®¸æ­£å¸¸æ¢è¡Œ */
            line-height: 1em;
            font-weight: 800;
            letter-spacing: -0.04em;
        }

        .codecouleur {
            margin: 4% 5%;
            height: 18%;
            background-color: rgb(46 147 60);
        }

        .codecouleur .siteweb {
            /* background-color:rgb(46 147 60); */
            color: #ffffff;
            text-align: center;
        }

        .flag {
            display: flex;
            height: 0.7%;
            margin: 0 5%;
        }

        .blue,
        .white,
        .red {
            width: 33.3333333%;
        }

        .blue {
            background-color: #0055A4;
        }

        .white {
            background-color: #ffffff;
        }

        .red {
            background-color: #EF4135;
        }

        .logo {
            margin: 10.75% 5%;
            height: 2.9%;
        }

        .logo img {
            width: 100%;
        }

        .barre {
            display: flex;
            font-size: 2rem;
            height: 19.4%;
        }

        .barre .center {
            width: 30%;
            font-size: 0.8em;
            white-space: nowrap;
            display: flex;
            /* ä½¿ç”¨ flexbox å¸ƒå±€ */
            align-items: center;
            /* å‚ç›´æ–¹å‘å±…ä¸­ */
            background-color: #ccc;
            transform: rotate(-90deg);
            /*  é€†æ—¶é’ˆæ—‹è½¬90åº¦ */
            transform-origin: center
                /* è®¾ç½®æ—‹è½¬çš„ä¸­å¿ƒç‚¹ä¸ºå…ƒç´ çš„ä¸­å¿ƒï¼ˆé»˜è®¤ï¼‰ */
        }

        .line-height {
            line-height: 1.1;
        }

        .contact {
            display: flex;
        }

        .contact .typo {
            width: 20%;
        }

        .contact .typo img {
            height: 60%;
            width: 100%;
            margin-top: 5%;
        }

        .contact .info {
            width: 100%;
            font-size: 1.9rem;
            line-height: 2.35em;
            margin-top: 3%;
            margin-left: 2%;
        }

        .composition .info,
        .vertus .info,
        .utilisation .info {
            font-size: 1.85rem;
        }

        .info {
            font-size: 1.85rem;
            line-height: 1.15em;
            font-family: 'Poppins', sans-serif;
        }

        .contact .info .adress-space-mail {
            line-height: 130%;
        }

        .barre .left {
            width: 30%;
            white-space: nowrap;
            display: flex;
            /* ä½¿ç”¨ flexbox å¸ƒå±€ */
            flex-direction: column;
            /* å­å…ƒç´ å‚ç›´æ’åˆ— */
            justify-content: center;
            /* å­å…ƒç´ åœ¨å‚ç›´æ–¹å‘å±…ä¸­ */
            transform: rotate(-90deg);
            /*  é€†æ—¶é’ˆæ—‹è½¬90åº¦ */
            transform-origin: center
                /* è®¾ç½®æ—‹è½¬çš„ä¸­å¿ƒç‚¹ä¸ºå…ƒç´ çš„ä¸­å¿ƒï¼ˆé»˜è®¤ï¼‰ */

        }

        .barre .right {
            width: 65%;
            padding-right: 5%;
        }

        .codebarre {
            /* background-image: url("https://res.cloudinary.com/laboratoire-calebasse/image/upload/v1725957144/3665346169230_Yi_Yi_Ren_Chao_Larmes_de_Job_Coix_lacryma_jobi_100cp_1800ad6a65.png"); */
            height: 70%;
            /* background-size: 100% auto; èƒŒæ™¯å›¾ç‰‡å®½åº¦é€‚åº” div å®½åº¦ï¼Œé«˜åº¦è‡ªåŠ¨ */
            /*background-position: bottom;  èƒŒæ™¯å›¾ç‰‡ä»åº•éƒ¨å¼€å§‹æ˜¾ç¤º */
            /* background-repeat: no-repeat; é˜²æ­¢èƒŒæ™¯å›¾ç‰‡é‡å¤ */
            overflow: hidden;
            /* éšè—è¶…å‡ºéƒ¨åˆ† */
            position: relative;
            /* ä½¿å­å…ƒç´ å¯ä»¥ç»å¯¹å®šä½ */
        }

        .codebarre img {
            width: 100%;
            /* å›¾ç‰‡å®½åº¦é€‚åº”å®¹å™¨ */
            position: absolute;
            bottom: 0;
            /* å›¾ç‰‡åº•éƒ¨å¯¹é½å®¹å™¨åº•éƒ¨ */
            left: 9%;
        }

        .prix {
            padding-left: 2.5em;
            font-family: 'Poppins', sans-serif;
        }

        .placeholder {
            min-height: 13%;
        }

        .margin {
            margin: -2% 4%;
        }

        .short {
            display: none;
        }

        @media print {
            body {
                font-family: 'Poppins', sans-serif !important;
            }
        }
    </style>
</head>

<body>
    <div id="labels-container">
        <div class="section">
            <div class="half">
                <div class="chinese"><span id="product-chinese">{{ product['nomchinois'] }}</span></div>
                <div class="subsection barre rotate">
                    <div class="left helvetica">
                        <div class="lot">LOT : {{ product['lot'] }}</div>
                        <div class="dlc">DLC : <span id="dlc-date"></span></div>
                    </div>
                    <div class="right">
                        <div class="placeholder">
                            <div id="product-price-container" class="prix helvetica">
                            </div>
                        </div>
                        <div class="codebarre"><img id="product-codebarre" src="{{ product['codebarre'] }}"
                                alt="Code Barre" /></div>
                    </div>
                </div>
                <div class="contact rotate margin">
                    <div class="typo"><img
                            src="https://res.cloudinary.com/laboratoire-calebasse/image/upload/v1729260144/Logo_vert_618e0c7bcc.png" />
                    </div>
                    <div class="info">
                        <div class="adress-space-mail">
                            <div>15 rue de la Vistule, 75013 Paris</div>
                            <div> 01 45 85 88 00 </div>
                            <div>www.calebasse.com</div>
                        </div>
                    </div>
                </div>
                <div class="subsection marque rotate margin">
                    <div class="cap title b">Le Laboratoire Calebasse</div>

                    <!-- Cet Ã©lÃ©ment est cachÃ©, il stocke juste la valeur de brand -->
                    <div id="product-brand" style="display: none;">{{ product['brand'] }}</div>

                    <!-- Ici sera injectÃ©e la bonne description -->
                    <div id="product-description" class="info line-height"></div>
                </div>


                <div class="subsection utilisation rotate margin">
                    <div class="cap title b ">Conseil d'utilisation
                    </div>
                    <div class="info helvetica"><span id="product-utilisation">{{ product['utilisation'] }}</span></div>
                </div>
                <div class="subsection vertus rotate margin">
                    <div class="cap title b ">Vertus</div>
                    <div class="info helvetica"><span id="product-vertus">{{ product['vertus'] }}</span></div>
                </div>
                <div class="subsection composition rotate margin">
                    <div class="cap title b ">Composition</div>
                    <div class="info helvetica"><span id="product-composition">{{ product['composition'] }}</span></div>
                </div>
            </div>
            <div class="subsection codecouleur" id="product-couleur"
                style="background-color: {{ product['couleur'] }};">
                <div class="siteweb b">
                    <div class="rotate"> </div>
                </div>
            </div>
            <div class="subsection logo">
                <img src="https://res.cloudinary.com/laboratoire-calebasse/image/upload/v1730111412/Fichier_3_68a574cf12.png"
                    alt="Logo" />
            </div>
            <div class="subsection nom cap"><span id="product-nom">{{ product['nom'] }}</span></div>
            <div class="subsection effet cap b" id="effet-border" style="color: #5DBD98">
                <span id="product-effets">{{ product['effets'] }}</span>
            </div>
            <div class="subsection poids b" id="poids-bio"><span id="product-poids">{{ product['poids'] }}</span>
                <img id="bio-image" src="{{ product['bio'] }}" alt="bio image" />
            </div>
            <div class="subsection icons">
                <div class="icon"><img id="icon-1" src="{{ product['icon'] }}" alt="Icon 1" /></div>
                <div class="icon"><img
                        src="https://res.cloudinary.com/laboratoire-calebasse/image/upload/v1738682689/vegan_f50bbf335a.png"
                        alt="Icon 2" />
                </div>
                <div class="icon"><img
                        src="https://res.cloudinary.com/laboratoire-calebasse/image/upload/v1742981718/sans_metaux_lourds_10d5ecd497.png"
                        alt="Icon 3" />
                </div>
                <div class="icon"><img
                        src="https://res.cloudinary.com/laboratoire-calebasse/image/upload/v1738682686/qualite_pharmacopee_8f6691512d.png"
                        alt="Icon 4" />
                </div>
            </div>
        </div>
    </div>

    <script>
        //avoir le DLC
        function generateDate() {
            const today = new Date();
            const futureYear = today.getFullYear() + 3;
            const month = String(today.getMonth() + 1).padStart(2, '0');
            return `${month}/${futureYear}`;
        }

        document.addEventListener("DOMContentLoaded", function () {
            console.log("ğŸ“¢ DOM entiÃ¨rement chargÃ©");

            // InsÃ©rer la DLC dans le HTML
            const dlcElement = document.getElementById("dlc-date");
            if (dlcElement) {
                dlcElement.textContent = generateDate();
                console.log("âœ… DLC insÃ©rÃ©e :", generateDate());
            } else {
                console.error("âŒ Erreur : L'Ã©lÃ©ment `#dlc-date` n'existe pas !");
            }

            // Ajouter un point aprÃ¨s le nom du produit si nÃ©cessaire
            const productNameElement = document.getElementById("product-nom");
            if (productNameElement) {
                let productName = productNameElement.textContent.trim();

                if (!productName.endsWith('.')) {
                    productNameElement.textContent = productName + '.';
                    console.log("âœ… Nom du produit mis Ã  jour :", productName + '.');
                } else {
                    console.log("âœ… Le nom du produit a dÃ©jÃ  un point :", productName);
                }
            } else {
                console.error("âŒ Erreur : L'Ã©lÃ©ment `#product-nom` n'existe pas !");
            }

            // RÃ©cupÃ©rer les Ã©lÃ©ments
            const brandElement = document.getElementById("product-brand");
            const descriptionElement = document.getElementById("product-description");

            if (!brandElement) {
                console.error("âŒ Erreur : L'Ã©lÃ©ment `#product-brand` est introuvable !");
                return;
            }
            if (!descriptionElement) {
                console.error("âŒ Erreur : L'Ã©lÃ©ment `#product-description` est introuvable !");
                return;
            }

            // Lire la valeur de `brand` si c'est long, court, mini description
            const brand = brandElement.textContent.trim().toLowerCase();

            console.log(`ğŸ¯ Brand dÃ©tectÃ© : ${brand}`);

            let longDescription = `
        Ã‰tabli Ã  Paris depuis 1997, le Laboratoire Calebasse propose des plantes et complÃ©ments alimentaires de qualitÃ©.
        100% naturels, la prioritÃ© est donnÃ©e Ã  l'efficacitÃ© et la sÃ©curitÃ©. Des contrÃ´les sont effectuÃ©s sur chaque lot
        pour vÃ©rifier l'exemption des pesticides et mÃ©taux lourds, ainsi que la conformitÃ© Ã  la PharmacopÃ©e.
        Nos formules inspirÃ©es de la MÃ©decine Traditionnelle Chinoise et perfectionnÃ©es par les Ã©tudes modernes, offrent
        une synergie Ã©quilibrÃ©e entre la richesse de la nature et la science moderne.
    `;

            let shortDescription = `
        Ã‰tabli Ã  Paris depuis 1997, le Laboratoire Calebasse propose des plantes et complÃ©ments alimentaires de qualitÃ©.
        100% naturels, la prioritÃ© est donnÃ©e Ã  l'efficacitÃ© et la sÃ©curitÃ©. Des contrÃ´les sont effectuÃ©s sur chaque lot
        pour vÃ©rifier l'exemption des pesticides et mÃ©taux lourds, ainsi que la conformitÃ© Ã  la PharmacopÃ©e.
    `;

            let miniDescription = `LE LABORATOIRE FRANÃ‡AIS DE LA PHARMACOPÃ‰E CHINOISE DEPUIS 1997
    `;

            if (brand === "long") {
                descriptionElement.innerHTML = longDescription;
                console.log("âœ… Description affichÃ©e : Longue");
            } else if (brand === "court") {
                descriptionElement.innerHTML = shortDescription;
                console.log("âœ… Description affichÃ©e : Courte");
            } else if (brand === "mini") {
                descriptionElement.innerHTML = miniDescription;
                console.log("âœ… Description affichÃ©e : Mini");
            } else {
                console.warn("âš ï¸ Brand inconnu, description par dÃ©faut affichÃ©e.");
            }
        });
    </script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

</body>

</html>